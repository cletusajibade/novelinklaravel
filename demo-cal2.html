<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Booking System</title>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        :root {
            --blue-1: #5265FF;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* background-color: #f4f4f4; */
            /* background-color: #f0f8ff; */
            background-color: #f6f6f6;
        }

        .calendar-container {
            width: 90%;
            max-width: 700px;
            height: 600px;
            /* Fixed height for the calendar */
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            /* background: var(--blue-1); */
            background: white;
            color: var(--blue-1);
        }

        .calendar-header button {
            background: none;
            border: none;
            /* color: white; */
            color: var(--blue-1);
            font-size: 16px;
            cursor: pointer;
        }

        .calendar-days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #dddddd;
            padding: 1px 0;
            font-weight: bold;
            text-align: center;
        }

        .calendar-days-cell {
            /* background: rgb(252, 245, 245); */
            background: #f0f8ff;
            padding: 5px 0;
        }

        .calendar-grid {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-auto-rows: 1fr;
            /* Ensure rows stretch evenly */
            gap: 1px;
            /* background: #ddd; */
            background: #ececec;
        }

        .calendar-cell {
            width: 100%;
            padding: 10px 0;
            text-align: center;
            background: white;
            cursor: pointer;
        }

        .calendar-cell:hover {
            background: #f0f8ff;
        }

        .calendar-cell.booked {
            background: #ffccd5;
            cursor: not-allowed;
        }

        .calendar-cell.today {
            /* background: #5266ff5e; */
            /* background: #ffd900b3; */
            color: white;
            background: var(--blue-1);
            font-weight: bold;
        }

        #event-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            width: 20rem;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            /* text-align: center; */
        }

        .modal-content input {
            width: 100%;
            padding: 8px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-content button {
            padding: 10px 20px;
            background: var(--blue-1);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .modal-content button.close {
            background: #ff4d4d;
        }

        .today-button {
            margin: 10px auto;
            padding: 10px 20px;
            background: var(--blue-1);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: block;
        }
    </style>
</head>

<body>
    <div class="calendar-container">
        <div class="calendar-header">
            <button id="prev-month">&#9664;</button>
            <h2 id="month-year"></h2>
            <button id="next-month">&#9654;</button>
        </div>
        <div class="calendar-days-grid">
            <div class="calendar-days-cell">Sun</div>
            <div class="calendar-days-cell">Mon</div>
            <div class="calendar-days-cell">Tue</div>
            <div class="calendar-days-cell">Wed</div>
            <div class="calendar-days-cell">Thu</div>
            <div class="calendar-days-cell">Fri</div>
            <div class="calendar-days-cell">Sat</div>
        </div>
        <div class="calendar-grid" id="calendar"></div>
        <button class="today-button" id="today-button">Today</button>
    </div>

    <div id="event-modal">
        <div class="modal-content">
            <h3>Book Appointment</h3>
            <p id="selected-date"></p>
            <input type="text" id="event-name" placeholder="Event Name" />
            <label>
                <input type="checkbox" name="timeslot[]" value="12:30"/>
                12:30 - 1:00 PM
            </label>
            <button id="save-event">Save</button>
            <button class="close" id="close-modal">Cancel</button>
        </div>
    </div>

    <script>
        const calendar = document.getElementById("calendar");
        const monthYear = document.getElementById("month-year");
        const prevMonth = document.getElementById("prev-month");
        const nextMonth = document.getElementById("next-month");
        const modal = document.getElementById("event-modal");
        const selectedDate = document.getElementById("selected-date");
        const eventName = document.getElementById("event-name");
        const saveEvent = document.getElementById("save-event");
        const closeModal = document.getElementById("close-modal");
        const todayButton = document.getElementById("today-button");

        let currentDate = new Date();
        const events = {};

        function renderCalendar() {
            calendar.innerHTML = "";
            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();
            monthYear.textContent = `${currentDate.toLocaleString('default', { month: 'long' })} ${year}`;

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();

            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement("div");
                emptyCell.classList.add("calendar-cell");
                calendar.appendChild(emptyCell);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const cell = document.createElement("div");
                cell.textContent = day;
                cell.classList.add("calendar-cell");

                const fullDate = `${year}-${month + 1}-${day}`;

                if (events[fullDate]) {
                    cell.classList.add("booked");
                }

                if (
                    day === today.getDate() &&
                    month === today.getMonth() &&
                    year === today.getFullYear()
                ) {
                    cell.classList.add("today");
                }

                cell.addEventListener("click", () => {
                    if (!cell.classList.contains("booked")) {
                        modal.style.display = "flex";
                        selectedDate.textContent = `Date: ${fullDate}`;
                        eventName.value = "";
                        saveEvent.dataset.date = fullDate;
                    }
                });

                calendar.appendChild(cell);
            }
        }

        prevMonth.addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });

        nextMonth.addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });

        todayButton.addEventListener("click", () => {
            currentDate = new Date();
            renderCalendar();
        });

        saveEvent.addEventListener("click", () => {
            const date = saveEvent.dataset.date;
            const name = eventName.value.trim();

            if (name) {
                events[date] = name;
                modal.style.display = "none";
                renderCalendar();
            } else {
                alert("Please enter an event name.");
            }
        });

        closeModal.addEventListener("click", () => {
            modal.style.display = "none";
        });

        renderCalendar();
    </script>
</body>

</html>
